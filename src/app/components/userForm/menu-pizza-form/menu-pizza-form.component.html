<section>
  <a>
    <h1>
      MENUS PIZZAS
    </h1>
  </a>

  <app-pizzas-form></app-pizzas-form>


  <form
    [formGroup]="pizzaMenuForm"
    (ngSubmit)="onSubmit()"
    #menuPizza="ngForm"
  >
    <div formArrayName="pizza" class="flag">
      <div
        [formGroupName]="i"
        *ngFor="let pizzas of pizza.controls; let i = index"
      >


      </div>
    </div>

    <div class="blockStyle">
      <div formArrayName="beverage">
        <div class="beverageStyle">
          <h5>Cliquez-ici pour découvrir nos boissons</h5>

        <div
          [formGroupName]="i"
          *ngFor="let beverages of beverage.controls; let i = index"
        >

          <label for="beverage-{{ i }}">
            {{ beverages.value.bevName }}
          </label>

          <input
            type="radio"
            formControlName="bevQuantity"
            name="bevQuantity"
            id="beverage-{{ i }}"
            value="{{ beverages.value.bevQuantity }}"
            (ngModelChange)="getUserChoice(i, beverages.value)"
          />
        </div>

        <p *ngIf="beerSelected">
          Vous avez sélectionné de la bière dans votre menu. Notez qu'il y a un supplément de 1€.
        </p>
      </div>
    </div>
      <div formArrayName="dessert">
        <div class="dessertStyle">
        <h5>Ciquez-ici pour découvrir nos desserts</h5>

        <div
          [formGroupName]="i"
          *ngFor="let desserts of dessert.controls; let i = index"
        >

          <label for="dessert-{{ i }}">
            {{ desserts.value.dessName }}
          </label>

          <input
            type="radio"
            formControlName="dessQuantity"
            name="dessQuantity"
            id="dessert-{{ i }}"
            value="{{ desserts.value.dessQuantity }}"
            (ngModelChange)="getUserChoice(i, desserts.value)"
          >
        </div>
      </div>
      </div>
  </div>
    <div class="priceStyle">
      <h5>Prix du menu</h5>

      <p>{{ pizzaMenuForm.value.pizzaMenuPriceTotal }} €</p>

      <p *ngIf="menuPizza.errors">
        {{ pizzaMenuForm.errors['notInTime'] }}
      </p>

      <p *ngIf="menuPizza.errors">
        {{ pizzaMenuForm.errors['lessPizzAndBevAndDess']}}
      </p>

      <button type="submit">Ajouter au panier</button>
    </div>
  </form>
</section>
